<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="Ticket">
    <resultMap id="TicketResult" type="Ticket">
        <result property="idTicket" column="idTicket"/>
        <result property="pointsJanuary" column="pointsJanuary"/>  
        <result property="pointsFebruary" column="pointsFebruary"/>  
        <result property="pointsMarch" column="pointsMarch"/>  
        <result property="pointsApril" column="pointsApril"/>  
        <result property="pointsMay" column="pointsMay"/>  
        <result property="pointsJune" column="pointsJune"/>  
        <result property="pointsJuly" column="pointsJuly"/>  
        <result property="pointsAugust" column="pointsAugust"/>  
        <result property="pointsSeptember" column="pointsSeptember"/>  
        <result property="pointsOctober" column="pointsOctober"/>  
        <result property="pointsNovember" column="pointsNovember"/>  
        <result property="pointsDecember" column="pointsDecember"/>  
        <result property="dateJanuary" column="dateJanuary"/>  
        <result property="dateFebruary" column="dateFebruary"/>  
        <result property="dateMarch" column="dateMarch"/>  
        <result property="dateApril" column="dateApril"/>  
        <result property="dateMay" column="dateMay"/>  
        <result property="dateJune" column="dateJune"/>  
        <result property="dateJuly" column="dateJuly"/>  
        <result property="dateAugust" column="dateAugust"/>  
        <result property="dateSeptember" column="dateSeptember"/>  
        <result property="dateOctober" column="dateOctober"/>  
        <result property="dateNovember" column="dateNovember"/>  
        <result property="dateDecember" column="dateDecember"/>  
        <association property="people" resultMap="PeopleResult"/>  
      
    </resultMap>
    
     <resultMap id="PeopleResult" type="People">
     <id property="id" column="id"/>
        <result property="name" column="name"/>  
       
    </resultMap>
 
   <select id="findTicket" parameterType="People" resultMap="TicketResult">
        SELECT PE.ID, 
               PE.NAME, 
               T.POINTSJANUARY,
               T.POINTSFEBRUARY,
               T.POINTSMARCH,
               T.POINTSAPRIL,
               T.POINTSMAY,
               T.POINTSJUNE,
               T.POINTSJULY,
               T.POINTSAUGUST,
               T.POINTSSEPTEMBER,
               T.POINTSOCTOBER,
               T.POINTSNOVEMBER,
               T.POINTSDECEMBER,
               T.DATEJANUARY,
               T.DATEFEBRUARY,
               T.DATEMARCH,
               T.DATEAPRIL,
               T.DATEMAY,
               T.DATEJUNE,
               T.DATEJULY,
               T.DATEAUGUST,
               T.DATESEPTEMBER,
               T.DATEOCTOBER,
               T.DATENOVEMBER,
               T.DATEDECEMBER
        FROM C_PEOPLE PE INNER JOIN  C_TICKET T ON PE.ID = T.IDPEOPLE 
        WHERE
        PE.ID = #{id}
      
    </select>
    
    <select id="findAll"  resultMap="TicketResult">
        SELECT PE.ID, 
               PE.NAME, 
               T.POINTSJANUARY,
               T.POINTSFEBRUARY,
               T.POINTSMARCH,
               T.POINTSAPRIL,
               T.POINTSMAY,
               T.POINTSJUNE,
               T.POINTSJULY,
               T.POINTSAUGUST,
               T.POINTSSEPTEMBER,
               T.POINTSOCTOBER,
               T.POINTSNOVEMBER,
               T.POINTSDECEMBER,
               T.DATEJANUARY,
               T.DATEFEBRUARY,
               T.DATEMARCH,
               T.DATEAPRIL,
               T.DATEMAY,
               T.DATEJUNE,
               T.DATEJULY,
               T.DATEAUGUST,
               T.DATESEPTEMBER,
               T.DATEOCTOBER,
               T.DATENOVEMBER,
               T.DATEDECEMBER
        FROM C_PEOPLE PE INNER JOIN  C_TICKET T ON PE.ID = T.IDPEOPLE 
        AND PE.ACTIVE = 1;
      
    </select>
	
	<insert id="insert" parameterType="Ticket" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO C_TICKET 
        	(IDPEOPLE, POINTSJANUARY, POINTSFEBRUARY, POINTSMARCH, POINTSAPRIL, POINTSMAY, POINTSJUNE, POINTSJULY, POINTSAUGUST,
        	POINTSSEPTEMBER, POINTSOCTOBER, POINTSNOVEMBER, POINTSDECEMBER) 
        VALUES (#{people.id},
        #{pointsJanuary}, #{pointsFebruary}, 
        #{pointsMarch}, #{pointsApril}, 
        #{pointsMay}, #{pointsJune}, 
        #{pointsJuly}, #{pointsAugust},
        #{pointsSeptember}, #{pointsOctober},
        #{pointsNovember}, #{pointsDecember})
    </insert>
    
 
    
    <update id="update" parameterType="Ticket" useGeneratedKeys="true" keyProperty="id">
        
        UPDATE C_TICKET <set>
        <if test="dateJanuary != null">dateJanuary = #{dateJanuary},</if>
        <if test="pointsJanuary != null">pointsJanuary = #{pointsJanuary},</if>
       <if test="dateFebruary != null">dateFebruary = #{dateFebruary},</if>
        <if test="pointsFebruary != null">pointsFebruary = #{pointsFebruary},</if>
        <if test="dateMarch != null">dateMarch = #{dateMarch},</if>
        <if test="pointsMarch != null">  pointsMarch = #{pointsMarch},</if>
        <if test="dateApril != null">dateApril = #{dateApril},</if>
        <if test="pointsApril != null">pointsApril = #{pointsApril},</if>
        <if test="dateMay != null">dateMay = #{dateMay},</if>
        <if test="pointsMay != null">pointsMay = #{pointsMay},</if>
        <if test="dateJune != null">dateJune = #{dateJune},</if>
        <if test="pointsJune != null">pointsJune = #{pointsJune},</if>
        <if test="dateJuly != null">dateJuly = #{dateJuly},</if>
        <if test="pointsJuly != null">pointsJuly = #{pointsJuly},</if>
        <if test="dateAugust != null">dateAugust = #{dateAugust},</if>
        <if test="pointsAugust != null">pointsAugust = #{pointsAugust},</if>
        <if test="dateSeptember != null">dateSeptember = #{dateSeptember},</if>
        <if test="pointsSeptember != null">pointsSeptember = #{pointsSeptember},</if>
        <if test="dateOctober != null">dateOctober = #{dateOctober},</if>
        <if test="pointsOctober != null">pointsOctober = #{pointsOctober},</if>
        <if test="dateNovember != null">dateNovember = #{dateNovember},</if>
        <if test="pointsNovember != null">pointsNovember = #{pointsNovember},</if>
        <if test="dateDecember != null">dateDecember = #{dateDecember},</if>
        <if test="pointsDecember != null">pointsDecember = #{pointsDecember},</if>
        </set>
        WHERE IDPEOPLE = #{people.id}
    
    </update>
    
     <delete id="delete" parameterType="People">
    	DELETE FROM C_TICKET WHERE idPeople = #{id}
    </delete>
    
    
</mapper>